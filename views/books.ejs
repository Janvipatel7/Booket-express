
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>All Books</title>
    <link rel="stylesheet" href="/assets/css/bootstrap.min.css">
    <link rel="stylesheet" href="/assets/css/style.css">
</head>

<body class="form-page">
    <%- include('partials/header') %>
        <section class="container mx-auto pt-5">
            <h3 class="mb-4 text-black">All Books</h3>
            <table class="table table-primary table-bordered table-striped table-responsive">
                <thead>
                    <tr>
                        <th>No </th>
                        <th>Book Name</th>
                        <th>Author</th>
                        <th>Price</th>
                        <th>Publisher Date</th>
                        <th>Genre</th>
                        <th>Format</th>
                        <th>Features</th>
                        <th>Action</th>
                    </tr>
                </thead>
                <tbody>
                    <% books.map((book , idx)=> { %>
                        <tr>
                            <td>
                                <%= idx + 1 %>
                            </td>
                            <td>
                                <%= book.bookName %>
                            </td>
                            <td>
                                <%= book.author %>
                            </td>
                            <td>
                                <%= book.price %>
                            </td>
                            <td>
                                <%= book.publisherDate %>
                            </td>
                            <td>
                                <%= book.genre %>
                            </td>
                            <td>
                                <%= book.format %>
                            </td>
                            <td>
                                <%= book.features %>
                            </td>
                            <td class="d-flex gap-2">
                                <a href="/edit-book/<%= book._id %>" class="btn btn-warning">Edit</a>
                                <button onclick="deleteBook('<%= book._id %>')" class="btn btn-danger">Delete</button>
                            </td>
                        </tr>
                        <% }) %>
                </tbody>
            </table>
        </section>

        <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
        <script>
            const deleteBook = (id) => {
                Swal.fire({
                    title: "Are you sure?",
                    text: "You won't be able to revert this!",
                    icon: "warning",
                    showCancelButton: true,
                    confirmButtonColor: "#3085d6",
                    cancelButtonColor: "#d33",
                    confirmButtonText: "Yes, delete it!"
                }).then((result) => {
                    if (result.isConfirmed) {
                        window.location.href = `/delete-book/${id}`
                    }
                });
            }
        </script>

</body>

</html>